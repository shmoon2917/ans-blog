---
title: Crawling과 Indexing
date: '2022-03-15 00:00:00'
description: 이전 포스트에서는 검색 시스템과 Googlebot이 어떻게 동작하는지 살펴보았습니다. 이번 장에서는 검색 시스템의 주 요소인 크롤링과 인덱싱을 자세히 알아봅니다.
---

이번 장에서는 다음과 같은 것들을 알아볼 예정입니다.

- HTTP 상태 코드 기초
- 메타데이터 및 웹 콘텐츠를 파싱할 때 웹 크롤러가 찾는 내용
- Google과 통신하여 검색 크롤러가 사이트에 새로운 콘텐츠가 있는지 확인하는 방법.
- 메타 로봇 태그 및 표준 링크를 활용하여 원하는 인덱싱 상태를 검색 엔진에 표시하는 방법.

# Status Codes

## HTTP 상태 코드가 무엇인가요?

[HTTP 응답 상태 코드](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)는 특정 HTTP 요청이 정상적으로 완료되었는지 여부를 나타냅니다. 많은 상태 코드가 있지만 SEO 컨텍스트에서 의미가 있는 것은 그 중 일부입니다.

## 200

> \`HTTP 200 OK\` 성공 응답 코드는 요청이 성공했음을 나타냅니다

페이지가 구글에 인덱싱되려면 반드시 `200` 코드를 반환해야 합니다.

Google에서 페이지를 인덱싱하려면 상태 코드 200을 반환해야 합니다. 이것은 페이지가 organic 트래픽을 받기 위해 통상 필요한 상태입니다.

## 301/308

> \`HTTP 301 Moved Permanently\` redirect 응답 코드는 요청된 리소스가 대상 URL로 최종 이동되었음을 나타냅니다.

이는 영구적인 리다이렉트입니다. 일반적으로 가장 널리 사용되는 유형이죠.

리다이렉트는 다양한 이유로 사용할 수 있지만, 주요한 이유는 URL이 A 포인트에서 B 포인트로 이동했음을 나타내기 위함입니다.

콘텐츠가 한 곳에서 다른 곳으로 옮겨지는 경우, 현재 또는 잠재적 클라이언트를 잃지 않고 봇이 계속해서 사이트를 색인화할 수 있도록 리다이렉트시켜야 합니다.

두 상태 코드의 주요 차이점은 \`301\`은 요청 메소드를 POST에서 GET으로 변경할 수 있는 반면 \`308\`은 변경할 수 없다는 것입니다.

Next.js에서 308 redirect를 트리거하려면 \`getStaticProps()\` 함수에서 props 대신 redirect를 반환합니다

```js
//  pages/about.js
export async function getStaticProps(context) {
  return {
    redirect: {
      destination: '/',
      permanent: true, // triggers 308
    },
  };
}
```

또는 \`next.config.js\` 파일의 redirect set에서 \`permanent: true\` 키를 사용해도 됩니다.

```js
//next.config.js

module.exports = {
  async redirects() {
    return [
      {
        source: '/about',
        destination: '/',
        permanent: true, // triggers 308
      },
    ];
  },
};
```

## 302

> \`HTTP 302 Found\` redirect 응답 코드는 요청된 리소스가 대상 URL로 일시적으로 이동되었음을 나타냅니다.

대부분의 경우에 \`302\` 리다이렉트는 \`301\` 리다이렉트여야 합니다. 사용자를 특정 페이지(e.g. 프로모션 페이지)로 일시적으로 리디렉션하거나 위치에 따라 사용자를 리디렉션하는 경우에는 그렇지 않을 수 있습니다.

## 404

> \`HTTP 404 Not Found\` client error 응답 코드는 서버가 요청된 리소스를 찾을 수 없음을 나타냅니다.

위에서 설명한 바와 같이 이동된 페이지는 \`HTTP 301\` 상태 코드를 사용하여 새로운 위치로 리다이렉트해야 합니다. 이가 발생하지 않으면 URL은 \`404\` 상태 코드를 반환할 수 있습니다.

\`404\` 상태 코드는 기본적으로 나쁘다고는 할 수 없습니다. 사용자가 존재하지 않는 URL을 방문했을 경우 바람직한 결과이지만 검색 순위가 저하될 수 있으므로 페이지 내에서 자주 오류가 발생해서는 안 됩니다.

Next.js는 어플리케이션 내에 존재하지 않는 URL에 대해서는 404 상태 코드를 자동으로 반환합니다.

경우에 따라 페이지에서 404 상태 코드를 반환할 수도 있습니다. props 대신 다음 항목을 반환하면 됩니다.

```js
export async function getStaticProps(context) {
  return {
    notFound: true, // triggers 404
  };
}
```

또는 \`pages/404.js\` 파일을 작성해서 빌드 타임에 정적 생성되는 커스텀 404 페이지를 만들 수도 있습니다.

```js
// pages/404.js
export default function Custom404() {
  return <h1>404 - Page Not Found</h1>;
}
```

## 410

> \`HTTP 410 Gone\` client error 응답 코드는 타겟 리소스로의 접근이 더 이상 가능하지 않아, 이 상태가 영구적일 가능성이 있음을 나타냅니다.

자주 사용되지는 않지만, 더 이상 필요하지 않은 콘텐츠를 삭제하는 경우 이 상태 코드를 사용하는 것이 좋습니다.

\`HTTP 410 Gone\`의 적절한 사용 예로는 다음과 같습니다.

- **E-Commerce**: 재고에서 영구적으로 삭제된 제품.
- **포럼**: 사용자가 삭제한 스레드.
- **블로그**: 삭제된 블로그 포스트.

이 상태 코드는 봇이 이 콘텐츠를 탐색하기 위해 다시 돌아오지 않도록 알려줍니다.

## 500

> \`HTTP 500 Internal Server Error\` 응답 코드는 서버에서 예기치 않은 상황이 발생하여 요청을 수행할 수 없음을 나타냅니다.

Next.js는 예기치 않은 애플리케이션 오류에 대해 자동으로 \`500\` 상태 코드를 반환합니다. \`pages/500.js\`를 작성하여 빌드 시 정적으로 생성되는 커스텀 에러 페이지를 생성할 수 있습니다.

## 503

> \`HTTP 503 Service Unavailable\` server error 응답 코드는 서버가 요청을 처리할 준비가 되지 않았음을 나타냅니다.

웹 사이트가 다운되고, 장기간 다운될 것으로 예상되는 경우 이 상태 코드를 반환하는 것이 좋습니다. 장기적으로는 검색 시스템에 의한 순위 하락을 막을 수 있습니다.

---
